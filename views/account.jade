extends layout

block content
  .container.main
    h1= title
    h2 Welcome,
      = " "
      if user.name_given
        span.name= user.name_given
      else
        span.name= user.email

    ul.nav.nav-tabs(role='tablist')
      li.active
        a(href='#') Update Your Account
      li
        a(href='/logout') Logout

    form.form-account(method='post', action='', role='form')
      p.account-lead-in Update your account settings for #{title}.

      if message
        div.messages(class='alert alert-warning', role='alert') !{message}

      .form-group
        label.ie-label(for='email') Email address
        input.form-control(name='email', type='email', placeholder='Email address', value='#{user.email}', required)
      .form-group
        label.ie-label(for='email_recovery') Recovery email address
        input.form-control(name='email_recovery', type='email', placeholder='Recovery email address', value='#{user.email_recovery}')
      if allowPasswordReset
        .form-group
          label.ie-label(for='pass_new') New password
          input.form-control(name='pass_new', type='password', placeholder='New password', required)
        .form-group
          label.ie-label(for='pass_confirm') New password (confirm)
          input.form-control(name='pass_confirm', type='password', placeholder='New password (confirm)', required)
      else
        .form-group
          label.ie-label(for='pass_new') New password
          input.form-control(name='pass_new', type='password', placeholder='New password')
        .form-group
          label.ie-label(for='pass_confirm') New password (confirm)
          input.form-control(name='pass_confirm', type='password', placeholder='New password (confirm)')
      .form-group
        label.ie-label(for='name_given') Given name
        input.form-control(name='name_given', type='text', placeholder='Given name', value='#{user.name_given}', required)
      .form-group
        label.ie-label(for='name_family') Family name
        input.form-control(name='name_family', type='text', placeholder='Family name', value='#{user.name_family}', required)
      unless allowPasswordReset
        .form-group.alert.alert-warning.hidden
          label.ie-label(for='pass_current') Current password
          input.form-control(name='pass_current', type='password', placeholder='Current password')
          em You must provide your current password to change your email address, recovery email, or password.

      .form-group
        button.btn.btn-lg.btn-primary.btn-arrow.btn-block(type='submit') Update Account
          span.fa.fa-angle-right
        input(type='hidden', name='redirect_uri', value='#{redirect_uri}')
        input(type='hidden', name='user_id', value='#{user.user_id}')
        input(type='hidden', name='_csrf', value='#{csrf}')
        input(type='hidden', name='active', value=1)
